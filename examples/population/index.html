<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Population Density Dorling cartogram</title>
</head>

<body style="margin:0">
  <div id="containerDiv" style="position:absolute;height:100%;width:100%;text-align:center;">

  </div>
  <script src="https://d3js.org/d3-format.v1.min.js"></script>
  <script src="../../build/dorling.js"></script>
  <script>
    NutsDorlingCartogram.dorling()
      .containerId("containerDiv")
      .nutsLevel(2)
      .colors(["#2d50a0", "#6487c3", "#aab9e1", "#f0cd91", "#e6a532", "#d76e2d"])
      .thresholdValues([-15, -10, 0, 10, 15, 20])
      .sizeDatasetCode("demo_r_pjangrp3")
      .sizeDatasetFilters("sex=T&age=TOTAL&unit=NR&time=2019")
      .colorDatasetCode("demo_r_gind3")
      .colorDatasetFilters("indic_de=GROWRT&time=2018")
      .circleExaggerationFactor(1.1)
      .positionStrength(0.1)
      .colorLegend({
        titleWidth: 220,
        title: "Population change 2018 - 2019 (per 1 000 inhabitants)",
        orient: "vertical",
        shapeRadius: 10,
        shapePadding: 5,
        labelAlign: "middle",
        labelUnit: " ",
        labelOffset: 10,
        shape: "circle",
        labelFormat: d3.format(".0f")
      })
      .sizeLegend({
        title: "Total population",
        titleYOffset: 15,
        titleXOffset: 23,
        textFunction: function (d) { return d / 1000000 + " million" },
        values: [20e6, 10e6, 1e6],
        bodyXOffset: 50,
        bodyYOffset: 85
      })
      .tooltip({
        colorLabel: "Population change per 1 000 inhabitants",
        sizeLabel: "Total population",
        shareLabel: "Share of national population",
      })
      .exclude(["MK", "ME", "TR", "AL", "RS"])
      .seaColor("white")
      .graticule(false)
      .loop(false)
      .pauseButton(false)
      .showBorders(true)
      .highlightColor("cyan")
      //d3-geo projection stuff
      .translateX(-390)
      .translateY(1123)
      .scale(0.0002065379208173783)
      .build();
  </script>
</body>

</html>